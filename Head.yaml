port: 8888
socks-port: 8889
mixed-port: 8899
allow-lan: true
mode: Rule
log-level: info
external-controller: '127.0.0.1:6170'
experimental:
  ignore-resolve-fail: true
mixin: # object
  tun:
    enable: true
    stack: system
    dns-hijack:
      - 198.18.0.2:53 # when fake-ip-range is 198.18.0.1/16, should hijack 198.18.0.2:53
    macOS-auto-route: true # auto set global route for Windows
    macOS-auto-detect-interface: true # auto detect interface, conflict with interface-name
  # interface-name: WLAN
  dns:
    enable: true
    # listen: 0.0.0.0:53
    ipv6: true
    default-nameserver:
      - 114.114.114.114
      - 8.8.8.8
    enhanced-mode: fake-ip #redir-host or fake-ip
    # fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR
    fake-ip-filter:
        - "*.lan"
        - stun.*.*.*
        - stun.*.*
        - music.163.com
        - "*.music.163.com"
        - "*.126.net"
        - musicapi.taihe.com
        - music.taihe.com
        - songsearch.kugou.com
        - trackercdn.kugou.com
        - "*.kuwo.cn"
        - api-jooxtt.sanook.com
        - api.joox.com
        - joox.com
        - y.qq.com
        - "*.y.qq.com"
        - streamoc.music.tc.qq.com
        - mobileoc.music.tc.qq.com
        - isure.stream.qqmusic.qq.com
        - dl.stream.qqmusic.qq.com
        - aqqmusic.tc.qq.com
        - amobile.music.tc.qq.com
        - "*.xiami.com"
        - "*.music.migu.cn"
        - music.migu.cn
        - "*.msftconnecttest.com"
        - "*.msftncsi.com"
        - localhost.ptlogin2.qq.com
        - "*.*.*.srv.nintendo.net"
        - "*.*.stun.playstation.net"
        - xbox.*.*.microsoft.com
        - "*.ipv6.microsoft.com"
        - "*.*.xboxlive.com"
        - speedtest.cros.wr.pvp.net
    nameserver:
      - 223.5.5.5
      - 119.29.29.29
      - tls://dns.rubyfish.cn:853 # DNS over TLS
      - https://1.1.1.1/dns-query # DNS over HTTPS
    fallback-filter:
      geoip: true
      ipcidr:
        # - 240.0.0.0/4
      # domain:
      #   - '+.google.com'
      #   - '+.facebook.com'
      #   - '+.youtube.com'

rule-providers:
  Down:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/AnaheimEX/Clash_Rules@master/Download.yaml'
    path: ./Rules/Download
    interval: 86400
  Custom:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/AnaheimEX/Clash_Rules@master/Custom.yaml'
    path: ./Rules/Custom
    interval: 86400
  Domestic:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Domestic.yaml'
    path: ./Rules/Domestic
    interval: 86400
  Domestic IPs:
    type: http
    behavior: ipcidr
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Domestic%20IPs.yaml'
    path: .Rules/Domestic IPs
    interval: 86400
  Youku:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Media/Youku.yaml'
    path: .Rules/Media/Youku
    interval: 86400
  Apple:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/AnaheimEX/Clash_Rules@master/Apple.yaml'
    path: .Rules/Apple
    interval: 86400 
  Tencent Video:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Media/Tencent%20Video.yaml'
    path: ./Rules/Media/Tencent Video
    interval: 86400
  LAN:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/LAN.yaml'
    path: ./Rules/LAN
    interval: 86400
  JP:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/AnaheimEX/Clash_Rules@master/JPSites.yaml'
    path: ./Rules/JPSites
    interval: 86400
  Steam:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/AnaheimEX/Clash_Rules@master/Steam.yaml'
    path: ./Rules/Steam
    interval: 86400
  YouTube:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Media/YouTube.yaml'
    path: ./Rules/Media/YouTube
    interval: 86400
  Netflix:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Media/Netflix.yaml'
    path: ./Rules/Media.Netflix
    interval: 86400
  Disney Plus:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Media/Disney%20Plus.yaml'
    path: ./Rules/Media/Disney Plus
    interval: 86400
  Telegram:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Telegram.yaml'
    path: ./Rules/Telegram
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Microsoft.yaml'
    path: ./Rules/Microsoft
    interval: 86400
  Proxy:
    type: http
    behavior: classical
    url: 'https://cdn.jsdelivr.net/gh/lhie1/Rules@master/Clash/Provider/Proxy.yaml'
    path: ./Rules/Proxy
    interval: 86400

rules:
  - RULE-SET,Down,DIRECT
  - RULE-SET,Domestic IPs,DIRECT
  - RULE-SET,Domestic,DIRECT
  - RULE-SET,Custom,Custom
  - RULE-SET,Youku,DIRECT
  - RULE-SET,Apple,Apple
  - RULE-SET,Tencent Video,DIRECT
  - RULE-SET,LAN,DIRECT
  - RULE-SET,JP,JPSites
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,Telegram,Telegram
  - RULE-SET,Disney Plus,Disney+
  - RULE-SET,Netflix,Netflix
  - RULE-SET,YouTube,YouTube
  - RULE-SET,Steam,Steam
  - RULE-SET,Proxy,Proxy
  - GEOIP,JP,JPSites
  - GEOIP,CN,DIRECT
  - MATCH,Others
